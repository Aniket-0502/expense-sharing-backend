{
	"info": {
		"_postman_id": "910c22f8-7eaa-4953-bc7b-91368e05a4de",
		"name": "expense-sharing-backend",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "33904948"
	},
	"item": [
		{
			"name": "Alice",
			"item": [
				{
					"name": "Create Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.environment.set(\"groupId\", pm.response.json().id);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{aliceToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"name\": \"test_group\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups"
							]
						}
					},
					"response": []
				},
				{
					"name": "add Charlie",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{aliceToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"charlie@gmail.com\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/members",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"members"
							]
						}
					},
					"response": []
				},
				{
					"name": "add Bob",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{aliceToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"bob@gmail.com\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/members",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"members"
							]
						}
					},
					"response": []
				},
				{
					"name": "Expense1Equal",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{aliceToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"description\": \"Lunch\",\r\n  \"amount\": 30000,\r\n  \"payerEmail\": \"alice@gmail.com\",\r\n  \"splitType\": \"EQUAL\",\r\n  \"splits\": [\r\n    { \"email\": \"alice@gmail.com\", \"value\": 1 },\r\n    { \"email\": \"bob@gmail.com\", \"value\": 1 },\r\n    { \"email\": \"charlie@gmail.com\", \"value\": 1 }\r\n  ]\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/expenses",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"expenses"
							]
						}
					},
					"response": []
				},
				{
					"name": "balanceCheck",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{aliceToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/balances",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"balances"
							]
						}
					},
					"response": []
				},
				{
					"name": "adminPromotion",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{aliceToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"bob@gmail.com\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/members/promote",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"members",
								"promote"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Bob",
			"item": [
				{
					"name": "Remove Charlie",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{bobToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"charlie@gmail.com\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/members",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"members"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Charlie",
			"item": [
				{
					"name": "healthCheck",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "jwt",
							"jwt": [
								{
									"key": "payload",
									"value": "{\r\n  \"userId\": \"5ba0ae45-3127-486d-ba40-cf6cfbdeeb13\"\r\n}",
									"type": "string"
								},
								{
									"key": "isSecretBase64Encoded",
									"value": false,
									"type": "boolean"
								},
								{
									"key": "secret",
									"value": "a-string-secret-at-least-256-bits-long",
									"type": "string"
								},
								{
									"key": "algorithm",
									"value": "HS256",
									"type": "string"
								},
								{
									"key": "addTokenTo",
									"value": "header",
									"type": "string"
								},
								{
									"key": "headerPrefix",
									"value": "Bearer",
									"type": "string"
								},
								{
									"key": "queryParamKey",
									"value": "token",
									"type": "string"
								},
								{
									"key": "header",
									"value": "{}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:3000/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "3000",
							"path": [
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "adding Dave",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{charlieToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"email\": \"dave@gmail.com\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/members",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"members"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Dave",
			"item": [
				{
					"name": "accessing another group info",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{daveToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/balances",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"balances"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Eve",
			"item": [
				{
					"name": "Settlement with Bob",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{eveToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"fromEmail\": \"eve@gmail.com\",\r\n  \"toEmail\": \"bob@gmail.com\",\r\n  \"amount\": 4000\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/groups/{{groupId}}/settlements",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"groups",
								"{{groupId}}",
								"settlements"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}